<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />

  <!-- Typekit (senin istediğin) -->
  <link rel="stylesheet" href="https://use.typekit.net/mhd1hjd.css">

  <style>
    @page {
      size: A4;
      margin: 18mm 8mm 20mm 8mm; /* VF’deki gibi sıkı margin */
    }

    html, body {
      margin: 0;
      padding: 0;
      /* Typekit font adı orgdan orga değişebilir; bu yüzden geniş fallback */
      font-family: "trajan-pro-3","trajan-pro","Trajan Pro","Arial Unicode MS", Arial, "Helvetica Neue", sans-serif;
      font-size: 10pt;
      color: #000;
      -webkit-print-color-adjust: exact;
      print-color-adjust: exact;
    }

    /* Header fixed: Puppeteer’da @top-center/running(header) birebir çalışmaz.
       O yüzden fixed header + content padding yöntemi. */
    .header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 95mm; /* header yüksekliği */
      text-align: center;
      padding-top: 10px;
      box-sizing: border-box;
    }

    .snocLogo {
      width: 250px;
      height: 80px;
      display: block;
      margin: 0 auto;
      object-fit: contain;
    }

    .header-text {
      font-size: 7pt;
      font-weight: normal;
      color: #333;
      margin-top: 5px;
      margin-bottom: 0;
      line-height: 1.35;
    }

    /* İçerik header'ın altından başlasın */
    .content {
      padding-top: 100mm; /* header yüksekliğinden biraz fazla */
    }

    /* Başlık */
    .main-title {
      text-align: center;
      width: 100%;
      margin-top: 8mm;
      margin-bottom: 4mm;
    }

    .main-title span {
      font-size: 15pt;
      font-weight: bold;
      border-bottom: 1px solid #000;
      padding-bottom: 2px;
    }

    /* Üst bilgi tablo */
    .top-info {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 4mm;
      font-size: 8pt;
    }
    .top-info td {
      vertical-align: top;
      padding: 0;
    }

    /* Quote line table */
    table.quote-lines-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8mm;
      font-size: 7pt;
    }

    table.quote-lines-table th {
      border: 1px solid #fff;
      text-align: center;
      background-color: #bfbfbf;
      padding: 4px 3px;
      font-weight: bold;
    }

    table.quote-lines-table td {
      border: 1px solid #fff;
      text-align: center;
      font-size: 6pt;
      padding: 4px 3px;
      vertical-align: top;
    }

    tr.data-row:nth-child(even) { background-color: #f5f5f5; }
    tr.data-row:nth-child(odd)  { background-color: #ffffff; }

    td.product-desc {
      text-align: left;
    }

    tr.data-row {
      page-break-inside: avoid;
      break-inside: avoid;
    }

    .product-image {
      width: 120px;
      height: 80px;
      max-width: 120px;
      max-height: 80px;
      object-fit: contain;
      display: block;
      margin: 0 auto;
    }

    /* Her 5 satırda page break */
    .page-break-row td {
      page-break-after: always;
      height: 1px;
      padding: 0;
      border: none;
      background: transparent;
    }

    /* Totals block */
    .totals-wrap {
      page-break-inside: avoid;
      break-inside: avoid;
      margin-top: 10mm;
    }

    .totals-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 7pt;
    }

    .totals-table td {
      padding: 2px 0;
    }

    .line-top {
      border-top: 1px solid #000;
      width: 100%;
      margin-bottom: 8px;
    }

    .line-bottom {
      border-bottom: 1px solid #000;
      width: 100%;
      margin-top: 8px;
    }

    /* Notes */
    .notes {
      page-break-inside: avoid;
      break-inside: avoid;
      margin-top: 6mm;
      font-size: 6pt;
      line-height: 1.35;
    }

    .notes table {
      border-collapse: collapse;
      width: 100%;
    }

    .notes td {
      padding: 2px 0;
      text-align: left;
    }

    /* Bank info page */
    .page-break-after {
      page-break-after: always;
      break-after: page;
      height: 1px;
    }

    .section-title {
      text-align: center;
      width: 100%;
      margin-top: 20mm;
      margin-bottom: 12mm;
    }

    .section-title span {
      font-size: 11pt;
      font-weight: bold;
      border-bottom: 1px solid #000;
      padding-bottom: 2px;
    }

    .bank-table {
      font-size: 10pt;
      margin-left: 5cm;
      margin-bottom: 2cm;
      border-collapse: collapse;
    }

    .bank-table td {
      padding: 2px 0;
    }

    .bank-label {
      letter-spacing: 10px;
      white-space: nowrap;
    }
  </style>
</head>

<body>
  <!-- HEADER -->
  <div class="header">
    {{#if logoDataUri}}
      <img class="snocLogo" src="{{logoDataUri}}" alt="Logo" />
    {{/if}}

    <div class="header-text">
      EKVATOR ISI MÜHENDİSLİK İNŞ. SAN. VE TİC. LTD. ŞTİ.<br/>
      NECİP FAZIL BULVARI NO:46/A Y.DUDULLU / ÜMRANİYE / İSTANBUL/TÜRKİYE <br/>
      TEL: +90 (850) 800 64 64
    </div>
  </div>

  <div class="content">
    <!-- BAŞLIK -->
    <div class="main-title">
      <span>{{title}}</span>
    </div>

    <!-- ÜST BİLGİ -->
    <table class="top-info">
      <tr>
        <td style="width:50%; text-align:left; vertical-align: bottom; padding-bottom:1px;">
          <div style="padding-top: 6mm;">SAYIN: {{customerName}}</div>
        </td>

        <td style="width:50%; text-align:right;">
          <div>{{todayFmt}}</div>
          <div>İLETİŞİM: {{ownerName}}</div>
          <div>E-MAIL: {{ownerEmail}}</div>
        </td>
      </tr>
    </table>

    <!-- LINES TABLE -->
    <table class="quote-lines-table">
